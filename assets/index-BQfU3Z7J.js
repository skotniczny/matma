var g=e=>{throw TypeError(e)};var v=(e,t,o)=>t.has(e)||g("Cannot "+o);var u=(e,t,o)=>(v(e,t,"read from private field"),o?o.call(e):t.get(e)),y=(e,t,o)=>t.has(e)?g("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),N=(e,t,o,n)=>(v(e,t,"write to private field"),n?n.call(e,o):t.set(e,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();function p(e,t){return t=t||document,e.charAt(0)==="#"?t.querySelector(e):t.querySelectorAll(e)}function l(e,t,...o){const n=document.createElement(e);t&&Object.assign(n,t);for(const r of o)typeof r!="string"?n.appendChild(r):n.appendChild(document.createTextNode(r));return n}var h;class A{constructor(t,o,n){y(this,h,[]);this.rows=t,this.cols=o,this.title=n}render(){const t=[],o=l("table",{className:"calc-table"}),n=l("tbody"),r=65;for(let s=0;s<this.rows;s+=1){let i=`<tr data-row=${s+1} data-row-letter=${String.fromCharCode(r+s)}>`;for(let f=0;f<this.cols;f++)i+=`<td data-row=${s+1} data-col=${f+1}></td>`;i+="</tr>",t.push(i)}if(n.innerHTML=t.join(""),o.appendChild(n),this.title){const s=l("caption",{textContent:this.title});o.appendChild(s)}return N(this,h,Array.from(p("td",o))),o}paint(t,o){for(const n of u(this,h))n.dataset.row<=t&&n.dataset.col<=o&&(n.style.backgroundColor="#ffaead")}clear(){for(const t of u(this,h))t.style.backgroundColor=""}}h=new WeakMap;var d;class M{constructor(){y(this,d,{})}add(t,o){u(this,d)[t]?(u(this,d)[t].repetitions++,o&&u(this,d)[t].correctAnswers++):u(this,d)[t]={repetitions:1,correctAnswers:o?1:0}}get(){const t=[],o=Object.entries(u(this,d));for(const n of o){const[r,{repetitions:s,correctAnswers:i}]=n;t.push([r,s,i])}return t}}d=new WeakMap;function E(e,t){return Math.floor(Math.random()*(t-e+1))+e}function T(e,t,o){const n=E(1,10),r=E(1,10);t.value=n,o.value=r,e.board.clear(),e.board.paint(n,r)}function j(e){const t=l("form",{name:"equation",className:"d-inline-flex",onsubmit:a=>{a.preventDefault();const c=a.target;if(c.result.value===""){e.updateInfo();return}const m=Number(c.rows.value),b=Number(c.columns.value),w=Number(c.result.value),$=m*b===w;e.updateHistory($,m,b,w),e.updateResults(),c.result.value="",c.result.focus(),$&&T(e,r,s)}}),o={type:"number",min:0,onblur:a=>{setTimeout(()=>{document.activeElement===document.body&&a.target.focus()},0)}},n={max:10,oninput:()=>{i.value="";const a=Number(r.value),c=Number(s.value);e.board.clear(),!(a===0||c===0)&&e.board.paint(a,c)},...o},r=l("input",{id:"rows",name:"rows",...n}),s=l("input",{id:"columns",name:"columns",...n}),i=l("input",{id:"result",name:"result",max:100,autofocus:!0,...o}),f=l("button",{id:"check",type:"submit"},"Sprawdź wynik");return T(e,r,s),t.appendChild(r),t.appendChild(document.createTextNode("×")),t.appendChild(s),t.appendChild(document.createTextNode("=")),t.appendChild(i),t.appendChild(f),t}const x=(e,t,o,n,r,s)=>{const i=e[0],f=e[1],a=e[2],c=e[3],m=e[4],b=e[5],w=t+1,$=o.split("_").join("×"),L=(s*100).toFixed();return`${i}${w}${f}${$}${a}${n}${c}${r}${m}${L}${b}`};function O(e){const t=[`<tr>
        <th>Lp.</th>
        <th>Działanie</th>
        <th>Powtórzenia</th>
        <th>Poprawne odpowiedzi</th>
        <th>Wynik</th>
      </tr>`];for(let n=0;n<e.length;n+=1){const[r,s,i]=e[n];t.push(x`
        <tr>
          <td>${n}</td>
          <td>${r}</td>
          <td>${s}</td>
          <td>${i}</td>
          <td>${i/s}%</td>
        <tr>
      `)}const o=document.createElement("table");return o.className="table",o.innerHTML=t.join(""),o}const C={board:new A(10,10,"Tabliczka mnożenia"),stats:new M,counter:0,init(){p("#tableContainer").appendChild(C.board.render()),p("#form").appendChild(j(C))},updateResults(){const e=this.stats.get();e.sort((o,n)=>o[2]/o[1]-n[2]/n[1]);const t=O(e);p("#results").replaceChildren(t)},updateHistory(e,t,o,n){const r=l(e?"span":"s",{textContent:n}),s=`<div class=${e?"success":"error"}>${++this.counter}. ${this.updateInfo(e)} - ${t} × ${o} = ${r.outerHTML}</div>`,i=p(".history")[0];i.innerHTML=s+i.innerHTML,this.stats.add(`${t}_${o}`,e)},updateInfo(e){let t="Podaj wynik!";return e!==void 0&&(t=e?"Gratulacje!":"Błąd"),p("h1")[0].textContent=t,t}};C.init();
