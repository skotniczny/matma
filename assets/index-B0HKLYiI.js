var A=e=>{throw TypeError(e)};var N=(e,t,r)=>t.has(e)||A("Cannot "+r);var u=(e,t,r)=>(N(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?A("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),I=(e,t,r,n)=>(N(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();function b(e,t){return t=t||document,e.charAt(0)==="#"?t.querySelector(e):t.querySelectorAll(e)}function m(e,t,...r){const n=document.createElement(e);t&&Object.assign(n,t);for(const o of r)typeof o!="string"?n.appendChild(o):n.appendChild(document.createTextNode(o));return n}var w;class j{constructor(){E(this,w,{})}add(t,r){u(this,w)[t]?(u(this,w)[t].repetitions++,r&&u(this,w)[t].correctAnswers++):u(this,w)[t]={repetitions:1,correctAnswers:r?1:0}}get(){const t=[],r=Object.entries(u(this,w));for(const n of r){const[o,{repetitions:i,correctAnswers:d}]=n;t.push([o,i,d])}return t}}w=new WeakMap;const x=(e,t)=>e.reduce((r,n)=>D[t](r,n)),L=(e,t)=>{const r=H[c.board.operation];let[n,o]=r();for(;c.board.operation===s.div&&n>30;)[n,o]=r();e.value=n,t.value=o,c.clearBoard(),c.paintBoard(n,o)};function B(){const e=c.board.operation,t=m("form",{name:"equation",className:"d-inline-flex",onsubmit:l=>{l.preventDefault();const a=l.target;if(a.result.value===""){c.updateInfo();return}const y=Number(a.rows.value),C=Number(a.columns.value),$=Number(a.result.value),v=x([y,C],e)===$;c.updateHistory(v,y,C,$),c.updateResults(),a.result.value="",a.result.focus(),v&&L(o,i)}}),r={type:"number",min:0,onblur:l=>{const a=l.target;c.setActiveElementId(`#${a.id}`),setTimeout(()=>{document.activeElement.type!=="number"&&a.focus()},0)}},n={max:e===s.add||e.sub?100:10,oninput:()=>{d.value="";const l=Number(o.value),a=Number(i.value);c.clearBoard(),!(l===0||a===0)&&c.paintBoard(l,a)},...r},o=m("input",{id:"rows",name:"rows",...n}),i=m("input",{id:"columns",name:"columns",...n}),d=m("input",{id:"result",name:"result",max:e===s.add?200:100,autofocus:!0,...r}),p=m("button",{id:"check",type:"submit"},"Sprawdź wynik");return L(o,i),t.appendChild(o),t.appendChild(document.createTextNode(e)),t.appendChild(i),t.appendChild(document.createTextNode("=")),t.appendChild(d),t.appendChild(p),t}const k=(e,t,r,n,o,i)=>{const d=e[0],p=e[1],l=e[2],a=e[3],y=e[4],C=e[5],$=t+1,v=(i*100).toFixed();return`${d}${$}${p}${r}${l}${n}${a}${o}${y}${v}${C}`};function z(e){const t=[`<tr>
        <th>Lp.</th>
        <th>Działanie</th>
        <th>Powtórzenia</th>
        <th>Poprawne odpowiedzi</th>
        <th>Wynik</th>
      </tr>`];for(let n=0;n<e.length;n+=1){const[o,i,d]=e[n];t.push(k`
        <tr>
          <td>${n}</td>
          <td>${o}</td>
          <td>${i}</td>
          <td>${d}</td>
          <td>${d/i}%</td>
        <tr>
      `)}return m("table",{className:"table",innerHTML:t.join("")})}function h(e,t){return Math.floor(Math.random()*(t-e+1))+e}const c={stats:new j,activeElementId:"",counter:0,init(e){this.board=e,b("#tableContainer").replaceChildren(e.render()),b("#form").replaceChildren(B())},updateResults(){const e=this.stats.get();e.sort((r,n)=>r[2]/r[1]-n[2]/n[1]);const t=z(e);b("#results").replaceChildren(t)},updateHistory(e,t,r,n){const o=this.board.operation,i=m(e?"span":"s",{textContent:n}).outerHTML,d=`<div class=${e?"success":"error"}>${++this.counter}. ${this.updateInfo(e)} - ${t} ${o} ${r} = ${i}</div>`,p=b(".history")[0];p.innerHTML=d+p.innerHTML,this.stats.add(`${t}${o}${r}`,e)},updateInfo(e){let t="Podaj wynik!";return e!==void 0&&(t=e?"Gratulacje!":"Błąd"),b("h1")[0].textContent=t,t},clearBoard(){this.board.clear()},paintBoard(e,t){this.board.paint(e,t)},setActiveElementId(e){if(typeof e!="string"||e.charAt(0)!=="#")throw new Error("Invalid id");this.activeElementId=e}},s={add:"+",sub:"−",multiply:"×",div:"÷"},P={[s.multiply]:"Tabliczka mnożenia",[s.add]:"Dodawanie",[s.sub]:"Odejmowanie",[s.div]:"Dzielenie"},D={[s.add]:(e,t)=>e+t,[s.sub]:(e,t)=>e-t,[s.multiply]:(e,t)=>e*t,[s.div]:(e,t)=>e/t},H={[s.add]:()=>{const e=h(0,100),t=h(0,100-e);return[e,t]},[s.sub]:()=>{const e=h(0,100),t=h(0,e);return[e,t]},[s.multiply]:()=>{const e=h(1,10),t=h(1,10);return[e,t]},[s.div]:()=>{const e=h(1,10),t=h(1,10);return[e*t,t]}};var f;class g{constructor(t,r,n){E(this,f,[]);this.rows=t,this.cols=r,this.operation=n}render(){const t=[],r=m("table",{className:"calc-table"}),n=m("tbody"),o=this.operation===s.multiply||this.operation===s.div?1:0,i=65;for(let p=0;p<this.rows;p+=1){let l=`<tr data-row=${p+o} data-row-letter=${String.fromCharCode(i+p)}>`;for(let a=0;a<this.cols;a++)l+=`<td data-row=${p+o} data-col=${a+1}></td>`;l+="</tr>",t.push(l)}n.innerHTML=t.join(""),r.appendChild(n);const d=m("caption",{textContent:P[this.operation]});return r.appendChild(d),I(this,f,Array.from(b("td",r))),r}paint(t,r){if(this.operation===s.multiply){for(const n of u(this,f))n.dataset.row<=t&&n.dataset.col<=r&&(n.style.backgroundColor="#ffaead");return}if(this.operation===s.div){const n=t/r;for(const o of u(this,f))o.dataset.row<=n&&o.dataset.col<=r&&(o.style.backgroundColor=o.dataset.col>1?"#ffaead":"#b80000");return}if(this.operation===s.add){const n=t+r;for(let o=0;o<n;o+=1)o<t?u(this,f)[o].style.backgroundColor="#ffaead":o<n&&(u(this,f)[o].style.backgroundColor="#b80000");return}if(this.operation===s.sub){const n=t-r;for(let o=0;o<t;o+=1)o<n?u(this,f)[o].style.backgroundColor="#ffaead":o<t&&(u(this,f)[o].style.backgroundColor="#ffd5d4")}}clear(){for(const t of u(this,f))t.style.backgroundColor=""}}f=new WeakMap;const M={"/dodawanie":{title:"Matma | Dodawanie",board:()=>new g(10,10,s.add)},"/odejmowanie":{title:"Matma | Odejmowanie",board:()=>new g(10,10,s.sub)},"/dzielenie":{title:"Matma | Dzielenie",board:()=>new g(10,10,s.div)},"/":{title:"Matma | Tabliczka mnożenia",board:()=>new g(10,10,s.multiply)}};function T(e){return e.split("/").pop()}function O(e){e=T(e);const t=M[`/${e}`]||M["/"];document.title=t.title,c.init(t.board()),c.activeElementId&&b(c.activeElementId).focus()}function R(e){e=T(e),history.pushState({},"",`./${e}`),O(e)}function S(){window.addEventListener("popstate",()=>{O(window.location.pathname)})}S();R(window.location.pathname);b("#appMenu").addEventListener("click",e=>{e.preventDefault();const t=e.target;t.tagName==="A"&&R(t.pathname)});
